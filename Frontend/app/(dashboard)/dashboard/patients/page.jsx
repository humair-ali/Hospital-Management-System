'use client';import { useEffect, useState } from 'react';import { getPatients } from '@/lib/api';import { SPALink } from '@/components/SPALink';import { FaUserInjured, FaPlus, FaSearch, FaChevronRight } from 'react-icons/fa';export default function PatientsPage() {  const [patients, setPatients] = useState([]);  const [loading, setLoading] = useState(true);  const [search, setSearch] = useState('');  useEffect(() => {    fetchPatients();  }, [search]);  const fetchPatients = async () => {    try {      const response = await getPatients({ limit: 100, search });      if (response.success && response.data) {        setPatients(response.data);      }    } catch (error) {      console.error('Error fetching patients:', error);    } finally {      setLoading(false);    }  };  return (    <div className="h-full flex flex-col gap-10 animate-in fade-in duration-700">      <div className="flex flex-col md:flex-row items-center justify-between gap-6 pb-6 border-b-2 border-gray-100">        <div className="flex items-center gap-4">          <div className="bg-primary-50 p-3 rounded-2xl text-primary-600 shadow-sm border border-primary-100">            <FaUserInjured size={24} />          </div>          <div>            <h1 className="text-3xl font-black text-gray-900 tracking-tight flex items-baseline gap-3">              Patient Registry <span className="text-[10px] font-black text-primary-600 bg-primary-50 px-3 py-1 rounded-full border border-primary-100 uppercase tracking-widest">Live Feed</span>            </h1>            <p className="text-sm text-gray-500 font-medium mt-1">Institutional demographic and clinical encounter records</p>          </div>        </div>        <SPALink href="patients/new">          <button className="btn-primary h-12 px-8 shadow-xl shadow-primary-500/20 flex items-center gap-2">            <FaPlus size={14} /> Register Patient          </button>        </SPALink>      </div>      <div className="bg-white rounded-[2.5rem] border border-gray-100 shadow-2xl shadow-gray-200/50 overflow-hidden flex flex-col flex-1">        <div className="p-10 border-b border-gray-50 flex flex-col md:flex-row items-center justify-between gap-6 bg-gray-50/30">          <div className="flex-1 w-full max-w-xl">            <div className="relative flex items-center group">              <FaSearch className="absolute left-6 text-gray-300 group-focus-within:text-primary-500 transition-colors" size={18} />              <input                type="text"                placeholder="Search by MRN, Name, or Contact..."                className="w-full h-14 pl-14 pr-6 bg-white border border-gray-100 rounded-2xl outline-none text-sm font-black text-gray-700 placeholder:text-gray-300 shadow-sm focus:border-primary-200 transition-all"                value={search}                onChange={(e) => setSearch(e.target.value)}              />            </div>          </div>        </div>        <div className="flex-1 overflow-auto">          <table className="w-full border-collapse">            <thead>              <tr className="bg-gray-50/50">                <th className="py-8 pl-10 text-left text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]">Identity Matrix</th>                <th className="py-8 text-left text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]">Demographics</th>                <th className="py-8 text-left text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]">Clinical Telemetry</th>                <th className="py-8 text-center text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]">Blood Protocol</th>                <th className="py-8 pr-10 text-right text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]">Functional Actions</th>              </tr>            </thead>            <tbody className="divide-y divide-gray-50">              {loading ? (                [1, 2, 3, 4, 5].map(i => (                  <tr key={i} className="animate-pulse">                    <td className="py-10 pl-10"><div className="flex items-center gap-4"><div className="w-12 h-12 rounded-2xl bg-gray-100"></div><div className="space-y-2"><div className="w-32 h-4 bg-gray-100 rounded"></div><div className="w-20 h-2 bg-gray-50 rounded"></div></div></div></td>                    <td className="py-10"><div className="w-28 h-5 bg-gray-100 rounded"></div></td>                    <td className="py-10"><div className="w-40 h-5 bg-gray-100 rounded"></div></td>                    <td className="py-10 text-center"><div className="mx-auto w-12 h-8 bg-gray-100 rounded-xl"></div></td>                    <td className="py-10 pr-10 text-right"><div className="ml-auto w-24 h-10 bg-gray-100 rounded-xl"></div></td>                  </tr>                ))              ) : patients.length === 0 ? (                <tr>                  <td colSpan={5} className="py-32 text-center">                    <div className="flex flex-col items-center">                      <FaUserInjured size={48} className="text-gray-200 mb-6" />                      <p className="text-sm font-black text-gray-400 uppercase tracking-widest">No matching patient records found</p>                    </div>                  </td>                </tr>              ) : (                patients.map((patient, idx) => (                  <tr key={patient.id} className="hover:bg-primary-50/30 transition-all group" style={{ animationDelay: `${idx * 50}ms` }}>                    <td className="py-10 pl-10">                      <div className="flex items-center gap-4">                        <div className="w-12 h-12 rounded-2xl bg-gradient-to-br from-primary-600 to-primary-800 text-white flex items-center justify-center font-black text-lg shadow-lg shadow-primary-500/10 group-hover:scale-110 transition-transform">                          {patient.name?.charAt(0).toUpperCase() || 'P'}                        </div>                        <div>                          <p className="font-black text-gray-900 leading-tight">{patient.name}</p>                          <p className="text-[10px] font-black text-gray-500 uppercase tracking-widest mt-1.5">ID: #{patient.id.toString().padStart(5, '0')}</p>                        </div>                      </div>                    </td>                    <td className="py-10">                      <div className="flex flex-col">                        <span className="text-sm font-black text-gray-700">{patient.age} Yrs</span>                        <span className="text-[10px] font-black text-gray-400 mt-1 uppercase tracking-widest">{patient.gender}</span>                      </div>                    </td>                    <td className="py-10">                      <span className="text-xs font-black text-gray-700 font-mono tracking-tighter">{patient.contact}</span>                    </td>                    <td className="py-10 text-center">                      <span className="px-4 py-2 bg-gray-100 text-gray-700 text-[10px] font-black uppercase tracking-widest rounded-xl border border-gray-200 group-hover:bg-white transition-colors">                        {patient.blood_group || 'N/A'}                      </span>                    </td>                    <td className="py-10 pr-10 text-right">                      <SPALink href={`patients/${patient.id}`}>                        <button className="h-12 w-12 flex items-center justify-center rounded-2xl bg-white border border-gray-100 text-gray-400 hover:text-primary-600 hover:border-primary-200 hover:shadow-lg transition-all active:scale-95">                          <FaChevronRight size={14} />                        </button>                      </SPALink>                    </td>                  </tr>                ))              )}            </tbody>          </table>        </div>      </div>    </div>  );}