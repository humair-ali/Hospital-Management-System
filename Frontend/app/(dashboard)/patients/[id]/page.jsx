'use client';import { useState, useEffect } from 'react';import { useParams } from 'next/navigation';import { useNavigation } from '@/context/NavigationContext'; import { getPatient, updatePatient } from '@/lib/api';import { toast } from 'react-toastify';import { FaUser, FaPhone, FaMapMarkerAlt, FaCalendar, FaVenusMars, FaTint, FaFileMedical } from 'react-icons/fa';export default function PatientDetailPage(props) {  const { id: propId } = props;  const params = useParams();  const { navigateTo } = useNavigation();   const id = propId || params?.id;  const [loading, setLoading] = useState(true);  const [formData, setFormData] = useState(null);  useEffect(() => {    async function fetchData() {      if (!id) return;      try {        const res = await getPatientid;        if (res.data) setFormData(res.data);      } catch (err) {        toast.error('Failed to load patient');        navigateTo('patients');      } finally {        setLoading(false);      }    }    fetchData();  }, [id, navigateTo]);  const handleSubmit = async (e) => {    e.preventDefault();    try {      await updatePatient(id, formData);      toast.success('Patient updated successfully');    } catch (err) {      toast.error('Update failed');    }  };  if (!loading && !formData) return <div>Patient not found</div>;  return (    <div className="max-w-4xl mx-auto space-y-6 animate-in fade-in zoom-in duration-300">      <div className="flex justify-between items-center border-b pb-4">        <div>          <h1 className="text-2xl font-bold text-gray-800">{formData?.name || (loading ? 'Loading...' : 'Unknown Patient')}</h1>          <p className="text-sm text-gray-500">MRN</p>        </div>        <button onClick={() => navigateTo('patients')} className="text-gray-500 hover:text-gray-700">Back to List</button>      </div>      <div className="grid grid-cols-1 md:grid-cols-3 gap-6">        {}        <div className="space-y-6">          <div className="bg-white p-6 rounded shadow border border-gray-200 text-center">            <div className="w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 text-4xl mx-auto mb-4 font-bold">              {(formData?.name || '?').charAt(0)}            </div>            <h2 className="text-xl font-bold text-gray-800">{formData?.name || (loading ? '...' : 'Unknown')}</h2>            <p className="text-gray-500">{formData?.gender || '...'}, {formData?.date_of_birth ? new Date().getFullYear() - new Date(formData.date_of_birth).getFullYear() : '...'} yrs</p>          </div>          <div className="bg-white p-6 rounded shadow border border-gray-200">            <h3 className="font-bold text-gray-700 mb-4 border-b pb-2">Quick Info</h3>            <div className="space-y-3 text-sm">              <div className="flex items-center gap-2"> <span className="font-semibold">Blood:</span> {formData?.blood_group || '...'}</div>              <div className="flex items-center gap-2"> <span className="font-semibold">Phone:</span> {formData?.phone || '...'}</div>            </div>          </div>        </div>        {}        <div className="md:col-span-2">          <form onSubmit={handleSubmit} className="bg-white p-6 rounded shadow border border-gray-200 grid grid-cols-1 md:grid-cols-2 gap-6">            <div className="col-span-1 md:col-span-2">              <h3 className="text-lg font-semibold text-gray-700 mb-4 flex items-center gap-2"> Edit Details</h3>            </div>            <div>              <label className="block text-sm font-bold text-gray-600 mb-1">Full Name</label>              <input type="text" className="w-full border rounded px-3 py-2" value={formData?.name || ''} onChange={e => setFormData({ ...formData, name: e.target.value })} disabled={loading} />            </div>            <div>              <label className="block text-sm font-bold text-gray-600 mb-1">Phone</label>              <input type="tel" className="w-full border rounded px-3 py-2" value={formData?.phone || ''} onChange={e => setFormData({ ...formData, phone: e.target.value })} disabled={loading} />            </div>            <div>              <label className="block text-sm font-bold text-gray-600 mb-1">Date of Birth</label>              <input type="date" className="w-full border rounded px-3 py-2" value={formData?.date_of_birth ? formData.date_of_birth.toString().split('T')[0] : ''} onChange={e => setFormData({ ...formData, date_of_birth: e.target.value })} disabled={loading} />            </div>            <div>              <label className="block text-sm font-bold text-gray-600 mb-1">Address</label>              <input type="text" className="w-full border rounded px-3 py-2" value={formData?.address || ''} onChange={e => setFormData({ ...formData, address: e.target.value })} disabled={loading} />            </div>            <div className="col-span-1 md:col-span-2">              <label className="block text-sm font-bold text-gray-600 mb-1">Medical History</label>              <textarea className="w-full border rounded px-3 py-2 h-24" value={formData?.medical_history || ''} onChange={e => setFormData({ ...formData, medical_history: e.target.value })} disabled={loading} />            </div>            <div className="col-span-1 md:col-span-2 pt-4">              <button type="submit" className="bg-blue-600 text-white font-bold py-2 px-6 rounded hover:bg-blue-700">Save Changes</button>            </div>          </form>        </div>      </div>    </div>  );}