'use client';import { useState, useEffect } from 'react';import { useRouter } from 'next/navigation';import { useNavigation } from '@/context/NavigationContext';import { useUser } from '@/context/UserContext';import { createPatient } from '@/lib/api';import { toast } from 'react-toastify';import {  FaUser, FaPhone, FaMapMarkerAlt, FaCalendar,  FaVenusMars, FaTint, FaFileMedical, FaUserShield,  FaEnvelope, FaIdCard, FaHeading, FaUsers} from 'react-icons/fa';export default function NewPatientPage() {  const { navigateTo } = useNavigation();  const { user, loading: authLoading } = useUser();  const [loading, setLoading] = useState(false);  useEffect(() => {    if (user && !['admin', 'receptionist'].includes(user.role)) {      navigateTo(`dashboard/${user.role}`);    }  }, [user, navigateTo]);   const [formData, setFormData] = useState({    name: '',    medical_record_number: '',     email: '',    dob: '',    gender: 'Male',    phone: '',    address: '',    blood_group: '',    emergency_contact_name: '',    emergency_contact_phone: '',    medical_history: ''  });  const handleSubmit = async (e) => {    e.preventDefault();    setLoading(true);    try {      await createPatient(formData);      toast.success('Patient Record Synchronized Successfully');      navigateTo('patients');    } catch (err) {      toast.error(err.response?.data?.error || 'Registry Synchronization Failure');    } finally {      setLoading(false);    }  };  return (    <div className="max-w-4xl mx-auto space-y-12 animate-in fade-in slide-in-from-bottom-8 duration-1000">      {}      <div className="flex flex-col sm:flex-row sm:items-end justify-between gap-8 pb-10 border-b border-gray-200/60">        <div className="space-y-3">          <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-50 border border-indigo-100 text-[10px] font-black uppercase tracking-widest text-indigo-600">            <span className="w-1.5 h-1.5 rounded-full bg-indigo-500 animate-pulse"></span>            Registry Vector Intake          </div>          <h1 className="text-5xl font-black text-slate-900 tracking-tight leading-none">Clinical Registry</h1>          <p className="text-slate-500 font-medium text-lg leading-relaxed max-w-xl">            Onboard new patients into the secure clinical ecosystem with high-integrity data entry.          </p>        </div>        <button          onClick={() => navigateTo('patients')}          className="btn-secondary h-12 px-10 rounded-2xl font-black uppercase tracking-[0.2em] text-[11px] hover:bg-white hover:text-red-600 hover:border-red-200 transition-all shadow-sm active:scale-95"        >          Abort Registration        </button>      </div>      <form onSubmit={handleSubmit} className="space-y-12">        {}        <div className="card-elevated p-12 bg-white border border-gray-200/50 space-y-10 relative overflow-hidden">          <div className="absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-primary-50 to-transparent opacity-40 -mr-20 -mt-20 rounded-full blur-3xl pointer-events-none"></div>          <div className="flex items-center gap-5 relative z-10 mb-2">            <div className="w-14 h-14 rounded-2xl bg-primary-100 text-primary-600 flex items-center justify-center shadow-inner">            </div>            <div>              <h3 className="text-2xl font-black text-slate-900 tracking-tight">Patient Identity</h3>              <p className="text-[10px] text-primary-500 font-black uppercase tracking-[0.2em] mt-1">Foundational Demographics</p>            </div>          </div>          <div className="grid grid-cols-1 md:grid-cols-2 gap-x-10 gap-y-8 relative z-10">            <div className="col-span-1 md:col-span-2 space-y-3">              <label className="text-[11px] font-black text-slate-400 uppercase tracking-[0.25em] ml-1 block">Full Legal Name</label>              <div className="input-with-icon-wrapper group">                <div className="input-icon-container">                </div>                <input                  type="text"                  required                  className="input-field input-field-with-icon h-16"                  placeholder="e.g. John Fitzgerald Kennedy"                  value={formData.name}                  onChange={e => setFormData({ ...formData, name: e.target.value })}                />              </div>            </div>            <div className="space-y-3">              <label className="text-[11px] font-black text-slate-400 uppercase tracking-[0.25em] ml-1 block">Clinical ID (MRN)</label>              <div className="input-with-icon-wrapper group bg-slate-50/50">                <div className="input-icon-container">                </div>                <input                  type="text"                  readOnly                  className="input-field input-field-with-icon h-16 bg-transparent border-transparent cursor-default font-black tracking-widest text-primary-700"                  value={formData.medical_record_number || 'SYSTEM-GENERATED'}                />              </div>              <p className="text-[9px] text-primary-400 font-black uppercase tracking-widest ml-1">Automated Registry Key</p>            </div>            <div className="space-y-3">              <label className="text-[11px] font-black text-slate-400 uppercase tracking-[0.25em] ml-1 block">Contact Email</label>              <div className="input-with-icon-wrapper group">                <div className="input-icon-container">                </div>                <input                  type="email"                  required                  className="input-field input-field-with-icon h-16"                  placeholder="name@clinical.id"                  value={formData.email}                  onChange={e => setFormData({ ...formData, email: e.target.value })}                />              </div>            </div>          </div>        </div>        {}        <div className="card-elevated p-12 bg-white border border-gray-200/50 space-y-10 relative overflow-hidden">          <div className="absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-indigo-50 to-transparent opacity-40 -mr-20 -mt-20 rounded-full blur-3xl pointer-events-none"></div>          <div className="flex items-center gap-5 relative z-10 mb-2">            <div className="w-14 h-14 rounded-2xl bg-indigo-100 text-indigo-600 flex items-center justify-center shadow-inner">            </div>            <div>              <h3 className="text-2xl font-black text-slate-900 tracking-tight">Clinical Vitals</h3>              <p className="text-[10px] text-indigo-500 font-black uppercase tracking-[0.2em] mt-1">Demographics & Residency</p>            </div>          </div>          <div className="grid grid-cols-1 md:grid-cols-3 gap-x-10 gap-y-8 relative z-10">            <div className="space-y-3">              <label className="text-[11px] font-black text-slate-400 uppercase tracking-[0.25em] ml-1 block">Date of Birth</label>              <div className="input-with-icon-wrapper group">                <div className="input-icon-container">                </div>                <input                  type="date"                  required                  className="input-field input-field-with-icon h-16 appearance-none"                  value={formData.dob}                  onChange={e => setFormData({ ...formData, dob: e.target.value })}                />              </div>            </div>            <div className="space-y-3">              <label className="text-[11px] font-black text-slate-400 uppercase tracking-[0.25em] ml-1 block">Physiological Gender</label>              <div className="input-with-icon-wrapper group">                <div className="input-icon-container">                </div>                <select                  className="input-field input-field-with-icon h-16 appearance-none cursor-pointer pr-10"                  value={formData.gender}                  onChange={e => setFormData({ ...formData, gender: e.target.value })}                >                  <option value="Male">Male Identity</option>                  <option value="Female">Female Identity</option>                  <option value="Other">Non-Binary / Undisclosed</option>                </select>                <div className="absolute right-5 pointer-events-none text-slate-400 group-focus-within:text-primary-500 transition-colors">                  <svg width="10" height="6" viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L5 5L9 1" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" /></svg>                </div>              </div>            </div>            <div className="space-y-3">              <label className="text-[11px] font-black text-slate-400 uppercase tracking-[0.25em] ml-1 block">Serology (Blood)</label>              <div className="input-with-icon-wrapper group">                <div className="input-icon-container">                </div>                <input                  type="text"                  className="input-field input-field-with-icon h-16 uppercase"                  placeholder="e.g. O Rh+"                  value={formData.blood_group}                  onChange={e => setFormData({ ...formData, blood_group: e.target.value })}                />              </div>            </div>            <div className="space-y-3">              <label className="text-[11px] font-black text-slate-400 uppercase tracking-[0.25em] ml-1 block">Primary Contact</label>              <div className="input-with-icon-wrapper group">                <div className="input-icon-container">                </div>                <input                  type="tel"                  required                  className="input-field input-field-with-icon h-16"                  placeholder="+1 (555) 000-0000"                  value={formData.phone}                  onChange={e => setFormData({ ...formData, phone: e.target.value })}                />              </div>            </div>            <div className="col-span-1 md:col-span-2 space-y-3">              <label className="text-[11px] font-black text-slate-400 uppercase tracking-[0.25em] ml-1 block">Residency Address</label>              <div className="input-with-icon-wrapper group">                <div className="input-icon-container">                </div>                <input                  type="text"                  required                  className="input-field input-field-with-icon h-16"                  placeholder="Full physical residency for clinical routing"                  value={formData.address}                  onChange={e => setFormData({ ...formData, address: e.target.value })}                />              </div>            </div>          </div>        </div>        {}        <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">          <div className="card-elevated p-12 bg-white border border-gray-200/50 space-y-10">            <div className="flex items-center gap-5 mb-2">              <div className="w-14 h-14 rounded-2xl bg-rose-100 text-rose-600 flex items-center justify-center shadow-inner">              </div>              <div>                <h3 className="text-2xl font-black text-slate-900 tracking-tight">Emergency Protocol</h3>                <p className="text-[10px] text-rose-500 font-black uppercase tracking-[0.2em] mt-1">Secondary Contact Logic</p>              </div>            </div>            <div className="space-y-8">              <div className="space-y-3">                <label className="text-[11px] font-black text-slate-400 uppercase tracking-[0.25em] ml-1 block">Kin Name</label>                <input                  type="text"                  required                  className="input-field h-16"                  placeholder="Primary contact name"                  value={formData.emergency_contact_name}                  onChange={e => setFormData({ ...formData, emergency_contact_name: e.target.value })}                />              </div>              <div className="space-y-3">                <label className="text-[11px] font-black text-slate-400 uppercase tracking-[0.25em] ml-1 block">Emergency Contact</label>                <input                  type="tel"                  required                  className="input-field h-16"                  placeholder="24/7 Phone Number"                  value={formData.emergency_contact_phone}                  onChange={e => setFormData({ ...formData, emergency_contact_phone: e.target.value })}                />              </div>            </div>          </div>          <div className="card-elevated p-12 bg-white border border-gray-200/50 space-y-10">            <div className="flex items-center gap-5 mb-2">              <div className="w-14 h-14 rounded-2xl bg-amber-100 text-amber-600 flex items-center justify-center shadow-inner">              </div>              <div>                <h3 className="text-2xl font-black text-slate-900 tracking-tight">Clinical Baseline</h3>                <p className="text-[10px] text-amber-500 font-black uppercase tracking-[0.2em] mt-1">Historical Telemetry</p>              </div>            </div>            <textarea              className="w-full h-[184px] p-8 bg-slate-50 focus:bg-white border-2 border-transparent focus:border-amber-500 rounded-[2rem] outline-none text-base font-black text-slate-800 placeholder:text-slate-300 placeholder:font-medium transition-all resize-none shadow-inner"              placeholder="Known allergies, chronic conditions, surgical history..."              value={formData.medical_history}              onChange={e => setFormData({ ...formData, medical_history: e.target.value })}            />          </div>        </div>        {}        <div className="pt-12 border-t border-slate-100 flex flex-col md:flex-row gap-8">          <button            type="submit"            disabled={loading}            className="flex-[2] btn-primary h-24 rounded-[2.5rem] text-lg font-black uppercase tracking-[0.4em] shadow-2xl shadow-primary-500/30 active:scale-[0.98] transition-all hover:bg-primary-700"          >            {loading ? (              <div className="flex items-center justify-center gap-5">                <div className="w-8 h-8 border-4 border-white/30 border-t-white rounded-full animate-spin"></div>                Securing Record...              </div>            ) : 'Finalize Clinical Registry'}          </button>          <button            type="button"            onClick={() => navigateTo('patients')}            className="flex-1 btn-secondary h-24 rounded-[2.5rem] font-black uppercase tracking-[0.4em] text-[10px] hover:bg-slate-50 transition-all shadow-lg"          >            Abort Protocol          </button>        </div>      </form>    </div>  );}function FaUserPlus() {  return (    <svg stroke="currentColor" fill="currentColor" strokeWidth="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">      <path d="M624 208H528v-96c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v96h-96c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h96v96c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-96h96c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"></path>    </svg>  );}