'use client';import { useState, useEffect } from 'react';import { useUser } from '@/context/UserContext';import { useNavigation } from '@/context/NavigationContext';import { updateProfile, uploadFile } from '@/lib/api';import { toast } from 'react-toastify';import { FaCamera, FaSave, FaUser, FaEnvelope, FaPhone, FaMapMarkerAlt, FaCalendar } from 'react-icons/fa';export default function UserProfile() {    const { user, refreshUser } = useUser();    const { navigateTo } = useNavigation();    const [loading, setLoading] = useState(false);    const [formData, setFormData] = useState({        name: '',        phone: '',        gender: '',        dob: '',        address: '',        profile_image: '',        language: 'en',        theme: 'light'    });    useEffect(() => {        if (user) {            setFormData({                name: user.name || '',                phone: user.phone || '',                gender: user.gender || '',                dob: user.dob ? new Date(user.dob).toISOString().split('T')[0] : '',                address: user.address || '',                profile_image: user.profile_image || '',                language: user.language || 'en',                theme: user.theme || 'light'            });        }    }, [user]);    const handleImageUpload = async (e) => {        const file = e.target.files?.[0];        if (!file) return;        if (file.size > 5 * 1024 * 1024) {            toast.error('File size should be less than 5MB');            return;        }        try {            const toastId = toast.loading('Uploading image...');            const reader = new FileReader();            reader.onloadend = async () => {                const base64 = reader.result;                setFormData(prev => ({ ...prev, profile_image: base64 }));                toast.update(toastId, { render: 'Image uploaded successfully', type: 'success', isLoading: false, autoClose: 2000 });            };            reader.readAsDataURL(file);        } catch (err) {            toast.error('Image upload failed');        }    };    const handleSubmit = async (e) => {        e.preventDefault();        setLoading(true);        try {            await updateProfile(formData);            await refreshUser();            toast.success('Profile updated successfully');        } catch (err) {            toast.error(err.message || 'Failed to update profile');        } finally {            setLoading(false);        }    };    return (        <div className="max-w-4xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700">            <div className="flex items-center justify-between">                <div>                    <h1 className="text-3xl font-black text-gray-900 tracking-tight">My Profile</h1>                    <p className="text-gray-500 font-medium">Manage your personal information and preferences</p>                </div>            </div>            <form onSubmit={handleSubmit} className="bg-white rounded-3xl p-8 shadow-xl shadow-gray-200/50 border border-gray-100">                {}                <div className="flex flex-col md:flex-row items-center gap-8 mb-10 pb-10 border-b border-gray-100">                    <div className="relative group">                        <div className="w-32 h-32 rounded-full overflow-hidden border-4 border-white shadow-xl ring-4 ring-primary-50">                            {formData.profile_image ? (                                <img src={formData.profile_image} alt="Profile" className="w-full h-full object-cover" />                            ) : (                                <div className="w-full h-full bg-gray-100 flex items-center justify-center text-gray-400">                                </div>                            )}                        </div>                        <label className="absolute bottom-0 right-0 w-10 h-10 bg-primary-600 rounded-full text-white flex items-center justify-center cursor-pointer shadow-lg hover:bg-primary-700 transition-all active:scale-95 group-hover:scale-110">                            <input type="file" className="hidden" accept="image/*" onChange={handleImageUpload} />                        </label>                    </div>                    <div className="text-center md:text-left space-y-1">                        <h2 className="text-2xl font-black text-gray-900">{user?.name}</h2>                        <div className="flex items-center justify-center md:justify-start gap-2 text-gray-500 font-medium">                            <span>{user?.email}</span>                        </div>                        <span className="inline-block px-3 py-1 rounded-full bg-primary-50 text-primary-700 text-xs font-black uppercase tracking-widest mt-2">{user?.role}</span>                    </div>                </div>                <div className="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">                    <div className="space-y-2">                        <label className="text-xs font-bold text-gray-500 uppercase tracking-wider ml-1">Full Name</label>                        <div className="relative">                            <input                                type="text"                                value={formData.name}                                onChange={e => setFormData({ ...formData, name: e.target.value })}                                className="w-full h-12 pl-10 pr-4 bg-gray-50 border-2 border-transparent focus:border-primary-200 focus:bg-white rounded-xl outline-none font-medium transition-all"                            />                        </div>                    </div>                    <div className="space-y-2">                        <label className="text-xs font-bold text-gray-500 uppercase tracking-wider ml-1">Phone Number</label>                        <div className="relative">                            <input                                type="tel"                                value={formData.phone}                                onChange={e => setFormData({ ...formData, phone: e.target.value })}                                className="w-full h-12 pl-10 pr-4 bg-gray-50 border-2 border-transparent focus:border-primary-200 focus:bg-white rounded-xl outline-none font-medium transition-all"                            />                        </div>                    </div>                    <div className="space-y-2">                        <label className="text-xs font-bold text-gray-500 uppercase tracking-wider ml-1">Date of Birth</label>                        <div className="relative">                            <input                                type="date"                                value={formData.dob}                                onChange={e => setFormData({ ...formData, dob: e.target.value })}                                className="w-full h-12 pl-10 pr-4 bg-gray-50 border-2 border-transparent focus:border-primary-200 focus:bg-white rounded-xl outline-none font-medium transition-all"                            />                        </div>                    </div>                    <div className="space-y-2">                        <label className="text-xs font-bold text-gray-500 uppercase tracking-wider ml-1">Gender</label>                        <select                            value={formData.gender}                            onChange={e => setFormData({ ...formData, gender: e.target.value })}                            className="w-full h-12 px-4 bg-gray-50 border-2 border-transparent focus:border-primary-200 focus:bg-white rounded-xl outline-none font-medium transition-all appearance-none cursor-pointer"                        >                            <option value="">Select Gender</option>                            <option value="Male">Male</option>                            <option value="Female">Female</option>                            <option value="Other">Other</option>                        </select>                    </div>                </div>                <div className="mt-8 pt-8 border-t border-gray-100 flex justify-end">                    <button                        type="submit"                        disabled={loading}                        className="btn-primary py-3 px-8 rounded-xl font-bold uppercase tracking-wider shadow-lg shadow-primary-500/30 flex items-center gap-2"                    >                        {loading ? (                            <span className="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></span>                        ) : (                        )}                        Save Changes                    </button>                </div>            </form>        </div>    );}