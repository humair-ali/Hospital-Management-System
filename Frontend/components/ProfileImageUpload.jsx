'use client';import { useState, useRef } from 'react';import { useUser } from '@/context/UserContext';import { FaCamera, FaSpinner, FaCheck } from 'react-icons/fa';export default function ProfileImageUpload({ size = 'lg', showEditButton = true }) {    const { user, updateProfileImage } = useUser();    const [uploading, setUploading] = useState(false);    const [success, setSuccess] = useState(false);    const fileInputRef = useRef(null);    const sizeClasses = {        sm: 'h-10 w-10',        md: 'h-16 w-16',        lg: 'h-24 w-24'    };    const handleFileSelect = async (e) => {        const file = e.target.files?.[0];        if (!file) return;        if (!file.type.startsWith('image/')) {            alert('Please select an image file');            return;        }        if (file.size > 5 * 1024 * 1024) {            alert('File size must be less than 5MB');            return;        }        setUploading(true);        setSuccess(false);        try {            const token = localStorage.getItem('token');            const formData = new FormData();            formData.append('profile_image', file);            const response = await fetch('http://localhost:8000/profile/upload-image', {                method: 'POST',                headers`                },                body: formData            });            const data = await response.json();            if (data.success) {                updateProfileImage(data.url);                setSuccess(true);                setTimeout(() => setSuccess(false), 2000);            } else {                alert('Upload failed: ' + data.error);            }        } catch (error) {            alert('Upload failed: ' + error.message);        } finally {            setUploading(false);        }    };    return (        <div className="relative group">            {}            <div className={`${sizeClasses[size]} rounded-full bg-gradient-to-tr from-blue-600 to-indigo-600 p-[3px] shadow-lg`}>                <div className="h-full w-full rounded-full bg-white flex items-center justify-center overflow-hidden">                    {user?.profile_image ? (                        <img                            src={user.profile_image}                            alt="Profile"                            className="h-full w-full object-cover"                        />                    ) : (                        <span className="text-blue-600 font-bold text-xl">                            {user?.name?.charAt(0).toUpperCase() || 'U'}                        </span>                    )}                </div>            </div>            {}            {showEditButton && (                <button                    onClick={() => fileInputRef.current?.click()}                    disabled={uploading}                    className="absolute inset-0 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer"                >                    {uploading ? (                    ) : success ? (                    ) : (                    )}                </button>            )}            {}            <input                ref={fileInputRef}                type="file"                accept="image/*"                onChange={handleFileSelect}                className="hidden"            />        </div>    );}