import { useRouter } from 'next/navigation';import { useEffect, useState, useCallback } from 'react';export function useAuth() {  const [user, setUser] = useState(() => {    if (typeof window !== 'undefined') {      const userData = localStorage.getItem('user');      return userData ? JSON.parse(userData) : null;    }    return null;  });  const [loading, setLoading] = useState(() => {    if (typeof window !== 'undefined') {      return !localStorage.getItem('user');    }    return true;  });  const router = useRouter();  const refreshUser = useCallback(() => {    const userData = localStorage.getItem('user');    if (userData) {      setUser(JSON.parse(userData));    }  }, []);  const updateUser = useCallback((updates) => {    const currentUser = JSON.parse(localStorage.getItem('user') || '{}');    const updatedUser = { ...currentUser, ...updates };    localStorage.setItem('user', JSON.stringify(updatedUser));    setUser(updatedUser);  }, []);  useEffect(() => {    const token = localStorage.getItem('token');    const userData = localStorage.getItem('user');    if (token && userData) {      setUser(JSON.parse(userData));    } else {      router.push('/');    }    setLoading(false);    const handleStorageChange = (e) => {      if (e.key === 'user') {        refreshUser();      }    };    window.addEventListener('storage', handleStorageChange);    return () => window.removeEventListener('storage', handleStorageChange);  }, [router, refreshUser]);  const logout = () => {    localStorage.removeItem('token');    localStorage.removeItem('user');    router.push('/');  };  return { user, loading, logout, updateUser, refreshUser };}export function hasRole(userRole, allowedRoles) {  if (!Array.isArray(allowedRoles)) {    allowedRoles = [allowedRoles];  }  return allowedRoles.includes(userRole);}