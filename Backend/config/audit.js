const { pool } = require('./db');async function insertAuditLog(req, action, entity = null, entityId = null, beforeJson = null, afterJson = null) {    try {        const userId = req.user ? req.user.id : null;        const ipAddress = req.ip || req.connection.remoteAddress;        await pool.query(            `INSERT INTO audit_logs (user_id, action, entity, entity_id, before_json, after_json, ip_address)       VALUES (?, ?, ?, ?, ?, ?, ?)`,            [                userId,                action,                entity,                entityId,                beforeJson ? JSON.stringify(beforeJson) : null,                afterJson ? JSON.stringify(afterJson) : null,                ipAddress            ]        );    } catch (err) {        console.error('FAILED TO INSERT AUDIT LOG:', err);    }}module.exports = { insertAuditLog };