const { pool } = require('../config/db');async function runMigration() {    console.log('üîß Starting Migration: Add Performance Indexes...');    const connection = await pool.getConnection();    try {        const indexes = [            { table: 'users', name: 'idx_users_email', col: 'email' },            { table: 'users', name: 'idx_users_role', col: 'role_id' },            { table: 'appointments', name: 'idx_appointments_date_status', col: 'scheduled_at, status' },            { table: 'appointments', name: 'idx_appointments_patient', col: 'patient_id' },            { table: 'appointments', name: 'idx_appointments_doctor', col: 'doctor_id' },            { table: 'payments', name: 'idx_payments_paid_at', col: 'paid_at' },            { table: 'patients', name: 'idx_patients_created_at', col: 'created_at' },            { table: 'patients', name: 'idx_patients_mrn', col: 'medical_record_number' },             { table: 'bills', name: 'idx_bills_issued_status', col: 'issued_at, status' }        ];        for (const idx of indexes) {            const [rows] = await connection.query(                `SELECT COUNT(1) IndexIsThere FROM INFORMATION_SCHEMA.STATISTICS                  WHERE table_schema=DATABASE() AND table_name='${idx.table}' AND index_name='${idx.name}'`            );            if (rows[0].IndexIsThere === 0) {                console.log(`üìù Adding index ${idx.name} to ${idx.table}...`);                await connection.query(`CREATE INDEX ${idx.name} ON ${idx.table} (${idx.col})`);                console.log(`‚úÖ Index ${idx.name} added.`);            } else {                console.log(`‚ö†Ô∏è Index ${idx.name} already exists on ${idx.table}. Skipping.`);            }        }    } catch (err) {        console.error('‚ùå Migration Failed:', err);    } finally {        connection.release();        process.exit(0);    }}runMigration();